一、完整可运行代码（修复截断部分）
**
首先补充之前未完成的 drawPixelZombie 函数及后续核心逻辑，确保游戏能正常启动、运行和结束：
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>像素僵尸生存战</title>
    <!-- 外部资源引用（CDN） -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#22c55e',
                        secondary: '#f43f5e',
                        dark: '#1e293b',
                        light: '#f8fafc'
                    },
                    fontFamily: {
                        pixel: ['VT323', 'monospace', 'system-ui']
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>
    
    <!-- 自定义样式 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.5);
            }
            .pixel-borders {
                box-shadow: 
                    -4px 0 0 0 #000,
                    4px 0 0 0 #000,
                    0 -4px 0 0 #000,
                    0 4px 0 0 #000;
            }
            .game-container {
                image-rendering: pixelated;
                image-rendering: -moz-crisp-edges;
                image-rendering: crisp-edges;
            }
        }
        
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        
        body {
            font-family: 'VT323', monospace;
            background-color: #0f172a;
            color: #f8fafc;
            overflow: hidden;
        }
        
        canvas {
            display: block;
            cursor: crosshair; /* 准星鼠标样式，提升射击体验 */
        }
        
        /* 按钮样式复用 */
        .btn {
            @apply px-4 py-2 bg-primary text-white font-bold rounded-lg hover:bg-green-600 transition-all transform hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50;
        }
        
        .btn-danger {
            @apply px-4 py-2 bg-secondary text-white font-bold rounded-lg hover:bg-rose-600 transition-all transform hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-opacity-50;
        }
        
        .ui-element {
            @apply bg-dark bg-opacity-80 p-3 rounded-lg border-2 border-primary;
        }
        
        .game-title {
            @apply text-4xl md:text-6xl font-bold text-primary text-shadow;
        }
        
        .game-subtitle {
            @apply text-xl md:text-2xl text-light text-shadow;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen">
    <!-- 游戏容器（相对定位，承载画布和UI） -->
    <div id="game-container" class="relative game-container">
        <!-- 游戏画布（核心渲染区域） -->
        <canvas id="gameCanvas" class="border-4 border-dark pixel-borders"></canvas>
        
        <!-- UI 元素（分数、生命、波次） -->
        <div id="ui-container" class="absolute top-0 left-0 w-full p-4 pointer-events-none">
            <div class="ui-element inline-block mr-4 pointer-events-none">
                <span class="text-xl">分数: <span id="score" class="text-primary">0</span></span>
            </div>
            <div class="ui-element inline-block pointer-events-none">
                <span class="text-xl">生命: <span id="lives" class="text-secondary">3</span></span>
            </div>
            <div class="ui-element inline-block ml-auto float-right pointer-events-none">
                <span class="text-xl">波次: <span id="wave" class="text-yellow-400">1</span></span>
            </div>
        </div>
        
        <!-- 开始界面 -->
        <div id="start-screen" class="absolute inset-0 flex flex-col items-center justify-center bg-dark bg-opacity-90 z-10">
            <h1 class="game-title mb-4">像素僵尸生存战</h1>
            <p class="game-subtitle mb-8">尽可能长时间地抵御僵尸群的攻击！</p>
            <div class="flex flex-col space-y-4 w-64">
                <button id="start-btn" class="btn text-xl py-3">开始游戏</button>
                <button id="controls-btn" class="btn text-xl py-3 bg-blue-600 hover:bg-blue-700">控制说明</button>
                <button id="about-btn" class="btn text-xl py-3 bg-purple-600 hover:bg-purple-700">关于游戏</button>
            </div>
        </div>
        
        <!-- 控制说明界面 -->
        <div id="controls-screen" class="absolute inset-0 flex flex-col items-center justify-center bg-dark bg-opacity-90 z-10 hidden">
            <h2 class="game-title mb-6">控制说明</h2>
            <div class="ui-element max-w-md w-full mb-6">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <h3 class="text-xl text-primary mb-2">移动</h3>
                        <ul class="list-disc list-inside space-y-1">
                            <li>WASD键</li>
                            <li>或者</li>
                            <li>方向键</li>
                            <li>或者</li>
                            <li>点击/触摸屏幕</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl text-primary mb-2">射击</h3>
                        <ul class="list-disc list-inside space-y-1">
                            <li>空格键</li>
                            <li>或者</li>
                            <li>鼠标左键</li>
                            <li>或者</li>
                            <li>触摸屏幕</li>
                        </ul>
                    </div>
                </div>
            </div>
            <button id="back-from-controls-btn" class="btn">返回菜单</button>
        </div>
        
        <!-- 关于游戏界面 -->
        <div id="about-screen" class="absolute inset-0 flex flex-col items-center justify-center bg-dark bg-opacity-90 z-10 hidden">
            <h2 class="game-title mb-6">关于游戏</h2>
            <div class="ui-element max-w-md w-full mb-6">
                <p class="mb-4">像素僵尸生存战是一款俯视视角射击游戏，你必须抵御一波又一波的僵尸攻击。</p>
                <p class="mb-4">每波僵尸难度递增，通过击杀僵尸获得分数，存活越久得分越高！</p>
                <p>支持电脑端鼠标/键盘、移动端触摸操作，适配多设备体验。</p>
            </div>
            <button id="back-from-about-btn" class="btn">返回菜单</button>
        </div>
        
        <!-- 游戏结束界面 -->
        <div id="game-over-screen" class="absolute inset-0 flex flex-col items-center justify-center bg-dark bg-opacity-90 z-10 hidden">
            <h2 class="game-title mb-2">游戏结束</h2>
            <p class="game-subtitle mb-2">你的最终得分:</p>
            <p id="final-score" class="text-4xl text-primary mb-6">0</p>
            <div class="flex space-x-4">
                <button id="restart-btn" class="btn">再来一次</button>
                <button id="menu-btn" class="btn-danger">返回菜单</button>
            </div>
        </div>
        
        <!-- 波次清除界面 -->
        <div id="wave-clear-screen" class="absolute inset-0 flex flex-col items-center justify-center bg-dark bg-opacity-70 z-10 hidden">
            <h2 class="game-title mb-2">波次清除！</h2>
            <p class="game-subtitle mb-2">第 <span id="cleared-wave">1</span> 波完成</p>
            <p class="text-xl mb-6">下一波僵尸将更强更快，准备好迎接挑战！</p>
            <div class="w-full max-w-md bg-dark bg-opacity-80 rounded-lg p-4 mb-6">
                <div class="flex justify-between items-center mb-2">
                    <span>僵尸击杀数:</span>
                    <span id="zombies-killed" class="text-primary">0</span>
                </div>
                <div class="flex justify-between items-center">
                    <span>获得分数:</span>
                    <span id="score-earned" class="text-primary">0</span>
                </div>
            </div>
            <button id="next-wave-btn" class="btn">下一波</button>
        </div>
        
        <!-- 移动端控制按钮（小屏幕显示） -->
        <div id="mobile-controls" class="absolute bottom-4 left-0 right-0 flex justify-between px-4 hidden">
            <div class="flex flex-col items-center">
                <div class="flex space-x-1">
                    <button id="up-btn" class="w-16 h-16 bg-dark bg-opacity-70 rounded-lg flex items-center justify-center text-2xl">
                        <i class="fa fa-arrow-up"></i>
                    </button>
                </div>
                <div class="flex space-x-1 mt-1">
                    <button id="left-btn" class="w-16 h-16 bg-dark bg-opacity-70 rounded-lg flex items-center justify-center text-2xl">
                        <i class="fa fa-arrow-left"></i>
                    </button>
                    <button id="down-btn" class="w-16 h-16 bg-dark bg-opacity-70 rounded-lg flex items-center justify-center text-2xl">
                        <i class="fa fa-arrow-down"></i>
                    </button>
                    <button id="right-btn" class="w-16 h-16 bg-dark bg-opacity-70 rounded-lg flex items-center justify-center text-2xl">
                        <i class="fa fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            <div class="flex flex-col items-center">
                <button id="shoot-btn" class="w-20 h-20 bg-secondary bg-opacity-70 rounded-full flex items-center justify-center text-2xl">
                    <i class="fa fa-crosshairs"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // 一、游戏常量定义（全局配置，便于后续修改）
        const GAME_WIDTH = 800;       // 画布宽度
        const GAME_HEIGHT = 600;      // 画布高度
        const PLAYER_SIZE = 16;       // 玩家尺寸
        const ZOMBIE_SIZE = 16;       // 僵尸尺寸
        const BULLET_SIZE = 4;        // 子弹尺寸
        const PLAYER_SPEED = 3;       // 玩家移动速度
        const ZOMBIE_SPEED = 1.5;     // 僵尸基础移动速度
        const BULLET_SPEED = 8;       // 子弹速度
        const PLAYER_HEALTH = 3;      // 玩家初始生命
        const ZOMBIE_HEALTH = 2;      // 僵尸初始生命
        const BULLET_DAMAGE = 1;      // 子弹伤害
        const SPAWN_INTERVAL = 1500;  // 僵尸生成间隔（毫秒）
        const MAX_ZOMBIES = 10;       // 基础最大僵尸数量
        const POINT_VALUE = 10;       // 击杀僵尸基础得分
        const MOVE_THRESHOLD = 5;     // 移动判定阈值（避免角色抖动）
        const SHOT_COOLDOWN = 300;    // 射击冷却时间（毫秒）

        // 二、游戏变量定义（动态状态）
        let canvas, ctx;               // 画布与上下文
        let player, bullets = [], zombies = [];  // 游戏实体（玩家、子弹、僵尸）
        let score = 0;                 // 当前分数
        let lives = PLAYER_HEALTH;     // 当前生命
        let wave = 1;                  // 当前波次
        let gameOver = false;          // 游戏结束标识
        let waveInProgress = false;    // 波次进行中标识
        let waveClear = false;         // 波次清除标识
        let zombiesKilledThisWave = 0; // 本波击杀僵尸数
        let scoreEarnedThisWave = 0;   // 本波获得分数
        let lastZombieSpawn = 0;       // 上次生成僵尸时间
        let gameLoopId;                // 游戏循环ID（用于停止循环）
        let keys = {};                 // 键盘按键状态
        let mouseX = 0, mouseY = 0;    // 鼠标在画布中的坐标
        let mouseDown = false;         // 鼠标按下状态
        let targetX = 0, targetY = 0;  // 玩家移动目标坐标（点击移动用）
        let moveToTarget = false;      // 点击移动标识
        let lastShotTime = 0;          // 上次射击时间
        let animationFrame = 0;        // 动画帧计数器（角色动画切换）

        // 三、音效资源（Base64编码，避免外部文件依赖，加载更稳定）
        const shootSound = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==');
        const hitSound = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==');
        const deathSound = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==');
        const waveSound = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==');

        // 四、DOM元素获取（缓存元素，避免重复查询）
        const gameCanvas = document.getElementById('gameCanvas');
        const startScreen = document.getElementById('start-screen');
        const controlsScreen = document.getElementById('controls-screen');
        const aboutScreen = document.getElementById('about-screen');
        const gameOverScreen = document.getElementById('game-over-screen');
        const waveClearScreen = document.getElementById('wave-clear-screen');
        const mobileControls = document.getElementById('mobile-controls');
        const scoreElement = document.getElementById('score');
        const livesElement = document.getElementById('lives');
        const waveElement = document.getElementById('wave');
        const finalScoreElement = document.getElementById('final-score');
        const clearedWaveElement = document.getElementById('cleared-wave');
        const zombiesKilledElement = document.getElementById('zombies-killed');
        const scoreEarnedElement = document.getElementById('score-earned');

        // 按钮元素
        const startBtn = document.getElementById('start-btn');
        const controlsBtn = document.getElementById('controls-btn');
        const aboutBtn = document.getElementById('about-btn');
        const backFromControlsBtn = document.getElementById('back-from-controls-btn');
        const backFromAboutBtn = document.getElementById('back-from-about-btn');
        const restartBtn = document.getElementById('restart-btn');
        const menuBtn = document.getElementById('menu-btn');
        const nextWaveBtn = document.getElementById('next-wave-btn');
        const upBtn = document.getElementById('up-btn');
        const downBtn = document.getElementById('down-btn');
        const leftBtn = document.getElementById('left-btn');
        const rightBtn = document.getElementById</doubaocanvas>
